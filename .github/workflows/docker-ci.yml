name: CI docker

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - name: Check out Repo 
          uses: actions/checkout@v2
          with:
            repository: ${{ github.repository }}
        - name: verify directory
          run: ls
        - name: Set up Docker Buildx
          uses: docker/setup-buildx-action@v1
        - name: verify directory
          run: ls
        - name: Login to DockerHub
          uses: docker/login-action@v1 
          with:
            username: ${{ secrets.DOCKERHUB_USERNAME }}
            password: ${{ secrets.DOCKERHUB_PASSWORD }}
        - name: verify directory
          run: ls
        - name: Build 
          run: |
           ls && docker build --rm=false . --file Dockerfile --tag gtestimage_automate:1  && ls 
          
        - name: run
          run: ls && docker run "gtestimage_automate:1" /bin/bash && cd googletest-master && cd googletest && ls 
#           && cmake CMakeLists.txt && make && ./executeTests
          
